<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- qversitwriter.cpp -->
  <title>Qt 1.2: QVersitWriter Class Reference</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline narrow creator">
<div class="header" id="qtdocheader">
  <div class="content"> 
    <a href="index.html" class="qtref"><span>QtMobility Reference Documentation</span></a>
  </div>
  <div class="breadcrumb toolblock">
    <ul>
      <li class="first"><a href="index.html">Home</a></li>
      <!--  Breadcrumbs go here -->
              <li><a href="modules.html">Modules</a></li>              <li><a href="qtversit.html">QtVersit</a></li>
              <li>QVersitWriter</li>
    </ul>
  </div>
</div>
<div class="content mainContent">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#public-types">Public Types</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#public-slots">Public Slots</a></li>
<li class="level1"><a href="#signals">Signals</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<h1 class="title">QVersitWriter Class Reference</h1>
<!-- $$$QVersitWriter-brief -->
<p>The QVersitWriter class writes Versit documents such as vCards to a device. <a href="#details">More...</a></p>
<!-- @@@QVersitWriter -->
<pre class="highlightedCode brush: cpp"> #include &lt;QVersitWriter&gt;</pre><p>Inherits <a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a>.</p>
<ul>
<li><a href="qversitwriter-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#Error-enum">Error</a></b> { NoError, UnspecifiedError, IOError, OutOfMemoryError, NotReadyError }</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#State-enum">State</a></b> { InactiveState, ActiveState, CanceledState, FinishedState }</td></tr>
</table>
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#QVersitWriter">QVersitWriter</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#QVersitWriter-2">QVersitWriter</a></b> ( QIODevice * <i>outputDevice</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#QVersitWriter-3">QVersitWriter</a></b> ( QByteArray * <i>outputBytes</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#dtor.QVersitWriter">~QVersitWriter</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QTextCodec * </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#defaultCodec">defaultCodec</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QIODevice * </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#device">device</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Error </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#error">error</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#setDefaultCodec">setDefaultCodec</a></b> ( QTextCodec * <i>codec</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#setDevice">setDevice</a></b> ( QIODevice * <i>device</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> State </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#state">state</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#waitForFinished">waitForFinished</a></b> ( int <i>msec</i> = -1 )</td></tr>
</table>
<ul>
<li class="fn">29 public functions inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#public-functions">QObject</a></li>
</ul>
<a name="public-slots"></a>
<h2>Public Slots</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#cancel">cancel</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#startWriting">startWriting</a></b> ( const QList&lt;QVersitDocument&gt; &amp; <i>input</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#startWriting-2">startWriting</a></b> ( const QList&lt;QVersitDocument&gt; &amp; <i>input</i>, QVersitDocument::VersitType <i>type</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#startWriting-3">startWriting</a></b> ( const QVersitDocument &amp; <i>input</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#startWriting-4">startWriting</a></b> ( const QVersitDocument &amp; <i>input</i>, QVersitDocument::VersitType <i>type</i> )</td></tr>
</table>
<ul>
<li class="fn">1 public slot inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#public-slots">QObject</a></li>
</ul>
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qversitwriter.html#stateChanged">stateChanged</a></b> ( QVersitWriter::State <i>state</i> )</td></tr>
</table>
<ul>
<li class="fn">1 signal inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li class="fn">1 property inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#properties">QObject</a></li>
<li class="fn">1 public variable inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#public-variables">QObject</a></li>
<li class="fn">4 static public members inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#static-public-members">QObject</a></li>
<li class="fn">7 protected functions inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#protected-functions">QObject</a></li>
<li class="fn">2 protected variables inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<!-- $$$QVersitWriter-description -->
<div class="descr">
<h2>Detailed Description</h2>
<p>The QVersitWriter class writes Versit documents such as vCards to a device.</p>
<p>QVersitWriter converts a <a href="qversitdocument.html">QVersitDocument</a> into its textual representation. QVersitWriter supports writing to an abstract I/O device which can be for example a file or a memory buffer. The writing can be done asynchronously and the <a href="qversitwriter.html#waitForFinished">waitForFinished</a>() function can be used to implement a blocking write.</p>
<p>The serialization of the document is done in accordance with the type of the <a href="qversitdocument.html">QVersitDocument</a> being written. The value of each <a href="qversitproperty.html">QVersitProperty</a> is encoded according to the type of object:</p>
<ul>
<li><a href="http://qt.nokia.com/doc/4.7/qstring.html">QStrings</a> are serialized verbatim, unless the default codec of the writer cannot encode the string: in this case, UTF-8 is used to encode it (and the CHARSET parameter added to the property, as per the vCard 2.1 specification). If the document type is vCard 2.1, quoted-printable encoding may also be performed.</li>
<li><a href="http://qt.nokia.com/doc/4.7/qbytearray.html">QByteArrays</a> are assumed to be binary data and are serialized as base-64 encoded values.</li>
<li><a href="qversitdocument.html">QVersitDocuments</a> are serialized as a nested document (eg. as per the AGENT property in vCard).</li>
</ul>
</div>
<p>See also <a href="qversitdocument.html">QVersitDocument</a> and <a href="qversitproperty.html">QVersitProperty</a>.</p>
<!-- @@@QVersitWriter -->
<div class="types">
<h2>Member Type Documentation</h2>
<!-- $$$Error$$$NoError$$$UnspecifiedError$$$IOError$$$OutOfMemoryError$$$NotReadyError -->
<h3 class="fn"><a name="Error-enum"></a>enum QVersitWriter::Error</h3>
<p>This enum specifies an error that occurred during the most recent operation:</p>
<table class="valuelist"><tr class="odd"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::NoError</tt></td><td class=" topAlign"><tt>0</tt></td><td  class="topAlign">The most recent operation was successful</td></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::UnspecifiedError</tt></td><td class=" topAlign"><tt>1</tt></td><td  class="topAlign">The most recent operation failed for an undocumented reason</td></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::IOError</tt></td><td class=" topAlign"><tt>2</tt></td><td  class="topAlign">The most recent operation failed because of a problem with the device</td></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::OutOfMemoryError</tt></td><td class=" topAlign"><tt>3</tt></td><td  class="topAlign">The most recent operation failed due to running out of memory</td></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::NotReadyError</tt></td><td class=" topAlign"><tt>4</tt></td><td  class="topAlign">The most recent operation failed because there is an operation in progress</td></tr>
</table>
<!-- @@@Error -->
<!-- $$$State$$$InactiveState$$$ActiveState$$$CanceledState$$$FinishedState -->
<h3 class="fn"><a name="State-enum"></a>enum QVersitWriter::State</h3>
<p>Enumerates the various states that a reader may be in at any given time</p>
<table class="valuelist"><tr class="odd"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::InactiveState</tt></td><td class=" topAlign"><tt>0</tt></td><td  class="topAlign">Write operation not yet started</td></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::ActiveState</tt></td><td class=" topAlign"><tt>1</tt></td><td  class="topAlign">Write operation started, not yet finished</td></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::CanceledState</tt></td><td class=" topAlign"><tt>2</tt></td><td  class="topAlign">Write operation is finished due to cancelation</td></tr>
<tr><td  class="topAlign"><tt>QVersitWriter::FinishedState</tt></td><td class=" topAlign"><tt>3</tt></td><td  class="topAlign">Write operation successfully completed</td></tr>
</table>
<!-- @@@State -->
</div>
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QVersitWriter[overload1]$$$QVersitWriter -->
<h3 class="fn"><a name="QVersitWriter"></a>QVersitWriter::QVersitWriter ()</h3>
<p>Constructs a new writer.</p>
<!-- @@@QVersitWriter -->
<!-- $$$QVersitWriter$$$QVersitWriterQIODevice* -->
<h3 class="fn"><a name="QVersitWriter-2"></a>QVersitWriter::QVersitWriter ( <a href="http://qt.nokia.com/doc/4.7/qiodevice.html">QIODevice</a> * <i>outputDevice</i> )</h3>
<p>Constructs a new writer that writes to <i>outputDevice</i>.</p>
<!-- @@@QVersitWriter -->
<!-- $$$QVersitWriter$$$QVersitWriterQByteArray* -->
<h3 class="fn"><a name="QVersitWriter-3"></a>QVersitWriter::QVersitWriter ( <a href="http://qt.nokia.com/doc/4.7/qbytearray.html">QByteArray</a> * <i>outputBytes</i> )</h3>
<p>Constructs a new writer that appends to <i>outputBytes</i>.</p>
<!-- @@@QVersitWriter -->
<!-- $$$~QVersitWriter[overload1]$$$~QVersitWriter -->
<h3 class="fn"><a name="dtor.QVersitWriter"></a>QVersitWriter::~QVersitWriter ()</h3>
<p>Frees the memory used by the writer. Waits until a pending asynchronous writing has been completed.</p>
<!-- @@@~QVersitWriter -->
<!-- $$$cancel[overload1]$$$cancel -->
<h3 class="fn"><a name="cancel"></a>void QVersitWriter::cancel ()<tt> [slot]</tt></h3>
<p>Attempts to asynchronously cancel the write request.</p>
<!-- @@@cancel -->
<!-- $$$defaultCodec[overload1]$$$defaultCodec -->
<h3 class="fn"><a name="defaultCodec"></a><a href="http://qt.nokia.com/doc/4.7/qtextcodec.html">QTextCodec</a> * QVersitWriter::defaultCodec () const</h3>
<p>Returns the document's codec.</p>
<p>See also <a href="qversitwriter.html#setDefaultCodec">setDefaultCodec</a>().</p>
<!-- @@@defaultCodec -->
<!-- $$$device[overload1]$$$device -->
<h3 class="fn"><a name="device"></a><a href="http://qt.nokia.com/doc/4.7/qiodevice.html">QIODevice</a> * QVersitWriter::device () const</h3>
<p>Returns the device used for writing, or 0 if no device has been set.</p>
<p>See also <a href="qversitwriter.html#setDevice">setDevice</a>().</p>
<!-- @@@device -->
<!-- $$$error[overload1]$$$error -->
<h3 class="fn"><a name="error"></a><a href="qversitwriter.html#Error-enum">Error</a> QVersitWriter::error () const</h3>
<p>Returns the error encountered by the last operation.</p>
<!-- @@@error -->
<!-- $$$setDefaultCodec[overload1]$$$setDefaultCodecQTextCodec* -->
<h3 class="fn"><a name="setDefaultCodec"></a>void QVersitWriter::setDefaultCodec ( <a href="http://qt.nokia.com/doc/4.7/qtextcodec.html">QTextCodec</a> * <i>codec</i> )</h3>
<p>Sets the default codec for the writer to use for writing the entire output.</p>
<p>If <i>codec</i> is NULL, the writer uses the codec according to the specification prescribed default. (for vCard 2.1, ASCII; for vCard 3.0, UTF-8).</p>
<p>See also <a href="qversitwriter.html#defaultCodec">defaultCodec</a>().</p>
<!-- @@@setDefaultCodec -->
<!-- $$$setDevice[overload1]$$$setDeviceQIODevice* -->
<h3 class="fn"><a name="setDevice"></a>void QVersitWriter::setDevice ( <a href="http://qt.nokia.com/doc/4.7/qiodevice.html">QIODevice</a> * <i>device</i> )</h3>
<p>Sets the device used for writing to <i>device</i>. Does not take ownership of the device.</p>
<p>See also <a href="qversitwriter.html#device">device</a>().</p>
<!-- @@@setDevice -->
<!-- $$$startWriting[overload1]$$$startWritingconstQList<QVersitDocument>& -->
<h3 class="fn"><a name="startWriting"></a>bool QVersitWriter::startWriting ( const <a href="http://qt.nokia.com/doc/4.7/qlist.html">QList</a>&lt;<a href="qversitdocument.html">QVersitDocument</a>&gt; &amp; <i>input</i> )<tt> [slot]</tt></h3>
<p>Starts writing <i>input</i> to <a href="qversitwriter.html#device">device</a>() asynchronously. The serialization format is determined based on the contents of the input documents.</p>
<p>Returns false if the output device has not been set or opened or if there is another asynchronous write operation already pending. Signal <a href="qversitwriter.html#stateChanged">stateChanged</a>() is emitted with parameter <a href="qversitwriter.html#State-enum">FinishedState</a> when the writing has finished.</p>
<p>The device must be already open. The client is responsible for closing it when finished.</p>
<!-- @@@startWriting -->
<!-- $$$startWriting$$$startWritingconstQList<QVersitDocument>&QVersitDocument::VersitType -->
<h3 class="fn"><a name="startWriting-2"></a>bool QVersitWriter::startWriting ( const <a href="http://qt.nokia.com/doc/4.7/qlist.html">QList</a>&lt;<a href="qversitdocument.html">QVersitDocument</a>&gt; &amp; <i>input</i>, <a href="qversitdocument.html#VersitType-enum">QVersitDocument::VersitType</a> <i>type</i> )<tt> [slot]</tt></h3>
<p>Starts writing <i>input</i> to <a href="qversitwriter.html#device">device</a>() asynchronously using the serialization format specified by <i>type</i>. If <i>type</i> is <a href="qversitdocument.html#VersitType-enum">QVersitDocument::InvalidType</a>, the format will be determined based on the contents of the input documents.</p>
<p>Returns false if the output device has not been set or opened or if there is another asynchronous write operation already pending. Signal <a href="qversitwriter.html#stateChanged">stateChanged</a>() is emitted with parameter <a href="qversitwriter.html#State-enum">FinishedState</a> when the writing has finished.</p>
<p>The device must be already open. The client is responsible for closing it when finished.</p>
<!-- @@@startWriting -->
<!-- $$$startWriting$$$startWritingconstQVersitDocument& -->
<h3 class="fn"><a name="startWriting-3"></a>bool QVersitWriter::startWriting ( const <a href="qversitdocument.html">QVersitDocument</a> &amp; <i>input</i> )<tt> [slot]</tt></h3>
<p>Starts writing <i>input</i> to <a href="qversitwriter.html#device">device</a>() asynchronously. The serialization format is determined based on the contents of the input documents.</p>
<p>Returns false if the output device has not been set or opened or if there is another asynchronous write operation already pending. Signal <a href="qversitwriter.html#stateChanged">stateChanged</a>() is emitted with parameter <a href="qversitwriter.html#State-enum">FinishedState</a> when the writing has finished.</p>
<p>The device must be already open. The client is responsible for closing it when finished.</p>
<!-- @@@startWriting -->
<!-- $$$startWriting$$$startWritingconstQVersitDocument&QVersitDocument::VersitType -->
<h3 class="fn"><a name="startWriting-4"></a>bool QVersitWriter::startWriting ( const <a href="qversitdocument.html">QVersitDocument</a> &amp; <i>input</i>, <a href="qversitdocument.html#VersitType-enum">QVersitDocument::VersitType</a> <i>type</i> )<tt> [slot]</tt></h3>
<p>Starts writing <i>input</i> to <a href="qversitwriter.html#device">device</a>() asynchronously using the serialization format specified by <i>type</i>. If <i>type</i> is <a href="qversitdocument.html#VersitType-enum">QVersitDocument::InvalidType</a>, the format will be determined based on the contents of the input documents.</p>
<p>Returns false if the output device has not been set or opened or if there is another asynchronous write operation already pending. Signal <a href="qversitwriter.html#stateChanged">stateChanged</a>() is emitted with parameter <a href="qversitwriter.html#State-enum">FinishedState</a> when the writing has finished.</p>
<p>The device must be already open. The client is responsible for closing it when finished.</p>
<!-- @@@startWriting -->
<!-- $$$state[overload1]$$$state -->
<h3 class="fn"><a name="state"></a><a href="qversitwriter.html#State-enum">State</a> QVersitWriter::state () const</h3>
<p>Returns the state of the writer.</p>
<!-- @@@state -->
<!-- $$$stateChanged[overload1]$$$stateChangedQVersitWriter::State -->
<h3 class="fn"><a name="stateChanged"></a>void QVersitWriter::stateChanged ( <a href="qversitwriter.html#State-enum">QVersitWriter::State</a> <i>state</i> )<tt> [signal]</tt></h3>
<p>The signal is emitted by the writer when its state has changed (eg. when it has finished writing to the device). <i>state</i> is the new state of the writer.</p>
<!-- @@@stateChanged -->
<!-- $$$waitForFinished[overload1]$$$waitForFinishedint -->
<h3 class="fn"><a name="waitForFinished"></a>bool QVersitWriter::waitForFinished ( int <i>msec</i> = -1 )</h3>
<p>If the state is <a href="qversitwriter.html#State-enum">ActiveState</a>, blocks until the writer has finished writing or <i>msec</i> milliseconds has elapsed, returning true if it successfully finishes or is cancelled by the user. If <i>msec</i> is negative or zero, the function blocks until the writer has finished, regardless of how long it takes. If the state is <a href="qversitwriter.html#State-enum">FinishedState</a>, returns true immediately. Otherwise, returns false immediately.</p>
<!-- @@@waitForFinished -->
</div>
  <div class="ft">
    <span></span>
  </div>
</div> 
<div class="footer">
  <p>
     <acronym title="Copyright">&copy;</acronym> 2008-2011 Nokia Corporation and/or its
     subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
     in Finland and/or other countries worldwide.</p>
  <p>
     All other trademarks are property of their respective owners. <a title="Privacy Policy"
     href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
  <br />
  <p>
    Licensees holding valid Qt Commercial licenses may use this document in accordance with the    Qt Commercial License Agreement provided with the Software or, alternatively, in accordance    with the terms contained in a written agreement between you and Nokia.</p>
  <p>
    Alternatively, this document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
    Free Documentation License version 1.3</a>
    as published by the Free Software Foundation.</p>
</div>
</body>
</html>
